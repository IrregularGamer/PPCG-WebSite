<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contact Us - PrimPerfection</title>
    <meta
      name="description"
      content="PrimPerfection - Empowering businesses through digital excellence."
    />
    <link rel="stylesheet" href="css/style.css" />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>
  <body>
    <header>
      <h1>Contact Us</h1>
      <nav>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="services.html">Services</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
      </nav>
    </header>
    <main>
      <section>
        <h2>Get in Touch</h2>
        <!-- FormSubmit Integration for Email -->
        <form
          action="https://formsubmit.co/support@primperfection.org"
          method="POST"
        >
          <label for="name">Name:</label>
          <input
            type="text"
            id="name"
            name="name"
            placeholder="Your Name"
            required
          />
          <label for="email">Email:</label>
          <input
            type="email"
            id="email"
            name="email"
            placeholder="Your Email"
            required
          />
          <label for="message">Message:</label>
          <textarea
            id="message"
            name="message"
            rows="4"
            placeholder="Your Message"
            required
          ></textarea>
          <button type="submit">Send Message</button>
          <!-- Hidden Input for Security -->
          <input type="hidden" name="_captcha" value="false" />
          <input type="hidden" name="_template" value="table" />
        </form>
        <p>
          Note: Your message will be sent directly to our email. If you
          encounter issues, please contact us at
          <a href="mailto:support@primperfection.org"
            >support@primperfection.org</a
          >
        </p>
      </section>
    </main>
    <footer>
      <p>Â© 2025 PrimPerfection Consulting Group</p>
      <ul>
        <li><a href="privacy-policy.html">Privacy Policy</a></li>
        <li><a href="terms-of-service.html">Terms of Service</a></li>
        <li>
          <a href="refund-cancellation-policy.html"
            >Refund and Cancellation Policy</a
          >
        </li>
        <li><a href="cookie-policy.html">Cookie Policy</a></li>
      </ul>
    </footer>
    <script src="js/script.js"></script>
    <script>
      $(document).ready(function () {
        const contactForm = document.getElementById("contactForm");
        if (contactForm) {
          contactForm.addEventListener("submit", async function (event) {
            event.preventDefault(); // Prevent default form submission
            const formData = {
              name: document.getElementById("name").value,
              email: document.getElementById("email").value,
              message: document.getElementById("message").value,
            };

            console.log("Submitting form data:", formData); // Debug log

            try {
              const response = await fetch("http://localhost:3000/submit", {
                method: "POST",
                headers: {
                  "Content-Type": "application/json",
                },
                body: JSON.stringify(formData),
              });

              console.log("Response received:", response); // Debug log

              if (response.ok) {
                console.log(
                  "Submission successful, redirecting to confirmation page."
                );
                window.location.href = "confirmation.html"; // Redirect to confirmation page
              } else {
                console.error("Error:", response.statusText);
              }
            } catch (error) {
              console.error("Error:", error);
            }
          });

          // Inline validation for email
          contactForm.addEventListener("submit", function (e) {
            const email = document.querySelector("input[type='email']");
            if (!email.value.includes("@")) {
              alert("Please enter a valid email address.");
              e.preventDefault();
            }
          });
        } else {
          console.error("Contact form not found!");
        }
      });
    </script>
  </body>
</html>
